<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Truth-in-Taxation Forms Portal</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 14px;
        }
        
        .nav-tabs {
            display: flex;
            background: #f3f4f6;
            border-bottom: 2px solid #e5e7eb;
            overflow-x: auto;
        }
        
        .nav-tab {
            padding: 16px 24px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: #6b7280;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            white-space: nowrap;
        }
        
        .nav-tab:hover {
            background: #e5e7eb;
            color: #374151;
        }
        
        .nav-tab.active {
            color: #3b82f6;
            border-bottom-color: #3b82f6;
            background: white;
        }
        
        .form-content {
            padding: 40px;
        }
        
        .form-selector {
            margin-bottom: 30px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .form-card {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .form-card:hover {
            border-color: #3b82f6;
            box-shadow: 0 10px 20px rgba(59, 130, 246, 0.1);
            transform: translateY(-2px);
        }
        
        .form-card.selected {
            border-color: #3b82f6;
            background: #eff6ff;
        }
        
        .form-card h3 {
            font-size: 16px;
            color: #1e3a8a;
            margin-bottom: 8px;
        }
        
        .form-card p {
            font-size: 13px;
            color: #6b7280;
            line-height: 1.5;
        }
        
        .form-badge {
            display: inline-block;
            padding: 4px 10px;
            background: #dbeafe;
            color: #1e40af;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            margin-top: 10px;
        }
        
        .section {
            margin-bottom: 40px;
        }
        
        .section-title {
            font-size: 20px;
            font-weight: 600;
            color: #1e3a8a;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e5e7eb;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .form-label {
            display: block;
            font-weight: 500;
            color: #374151;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .form-textarea {
            min-height: 100px;
            resize: vertical;
            font-family: inherit;
        }
        
        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .form-input.calculated {
            background-color: #f0f9ff;
            font-weight: 600;
            color: #1e40af;
        }
        
        .input-group {
            display: flex;
            align-items: center;
        }
        
        .input-prefix {
            background: #f3f4f6;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-right: none;
            border-radius: 8px 0 0 8px;
            font-weight: 500;
            color: #6b7280;
        }
        
        .input-group .form-input {
            border-radius: 0 8px 8px 0;
        }
        
        .help-text {
            font-size: 12px;
            color: #6b7280;
            margin-top: 4px;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
        }
        
        .checkbox-group input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .checkbox-group label {
            cursor: pointer;
            margin: 0;
        }
        
        .button-group {
            display: flex;
            gap: 12px;
            margin-top: 30px;
        }
        
        .btn {
            flex: 1;
            padding: 14px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(59, 130, 246, 0.3);
        }
        
        .btn-secondary {
            background: white;
            color: #374151;
            border: 2px solid #e5e7eb;
        }
        
        .btn-secondary:hover {
            background: #f9fafb;
            border-color: #d1d5db;
        }
        
        .btn-success {
            background: linear-gradient(135deg, #059669 0%, #10b981 100%);
            color: white;
        }
        
        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(5, 150, 105, 0.3);
        }
        
        .btn-print {
            background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);
            color: white;
        }
        
        .btn-print:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(124, 58, 237, 0.3);
        }
        
        .results-card {
            background: linear-gradient(135deg, #059669 0%, #10b981 100%);
            color: white;
            padding: 24px;
            border-radius: 12px;
            margin-top: 30px;
        }
        
        .results-card h3 {
            font-size: 18px;
            margin-bottom: 16px;
        }
        
        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }
        
        .result-item:last-child {
            border-bottom: none;
        }
        
        .result-label {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .result-value {
            font-size: 18px;
            font-weight: 700;
        }
        
        .info-box {
            background: #eff6ff;
            border-left: 4px solid #3b82f6;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .info-box p {
            font-size: 14px;
            color: #1e40af;
            line-height: 1.6;
        }
        
        .warning-box {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 16px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .warning-box p {
            font-size: 14px;
            color: #92400e;
            line-height: 1.6;
        }
        
        .notice-preview {
            background: #f9fafb;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 24px;
            margin-top: 20px;
            font-family: 'Georgia', serif;
        }
        
        .notice-preview h4 {
            text-align: center;
            font-size: 18px;
            margin-bottom: 20px;
            color: #1e3a8a;
        }
        
        .notice-preview p {
            line-height: 1.8;
            margin-bottom: 12px;
            color: #374151;
        }
        
        .notice-preview table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .notice-preview td {
            padding: 8px;
            border: 1px solid #d1d5db;
        }
        
        @media (max-width: 768px) {
            .form-content {
                padding: 24px;
            }
            
            .header {
                padding: 24px;
            }
            
            .header h1 {
                font-size: 24px;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .nav-tabs {
                overflow-x: auto;
            }
        }
        
        /* Print Styles for Texas Comptroller Format */
        @media print {
            body {
                background: white;
                padding: 0;
                margin: 0;
                font-family: Arial, Helvetica, sans-serif;
                font-size: 10pt;
                color: black;
            }
            
            .nav-tabs,
            .button-group,
            .edge-badge,
            .info-box,
            .warning-box,
            .form-selector,
            .form-grid {
                display: none !important;
            }
            
            .container {
                box-shadow: none;
                border-radius: 0;
                max-width: 100%;
                background: white;
            }
            
            /* Official Comptroller Header */
            .header {
                background: white !important;
                color: black !important;
                border-bottom: 3px solid black;
                padding: 15px 20px;
                text-align: left;
            }
            
            .header h1 {
                color: black !important;
                font-size: 16pt;
                font-weight: bold;
                margin-bottom: 5px;
            }
            
            .header p {
                color: black !important;
                font-size: 9pt;
                opacity: 1 !important;
            }
            
            /* Add Comptroller logo area */
            .header::before {
                content: "TEXAS COMPTROLLER OF PUBLIC ACCOUNTS";
                display: block;
                font-size: 11pt;
                font-weight: bold;
                margin-bottom: 10px;
                padding-bottom: 5px;
                border-bottom: 2px solid black;
            }
            
            .form-content {
                padding: 20px 30px;
            }
            
            /* Form Number Display */
            .form-content::before {
                content: attr(data-form-number);
                display: block;
                font-size: 12pt;
                font-weight: bold;
                margin-bottom: 15px;
                padding: 10px;
                border: 2px solid black;
                background: #f0f0f0;
            }
            
            /* Section Styling - Official Form Layout */
            .section {
                margin-bottom: 20px;
                page-break-inside: avoid;
            }
            
            .section-title {
                font-size: 11pt;
                font-weight: bold;
                color: black;
                background: #e0e0e0;
                padding: 8px 10px;
                border: 1px solid black;
                margin-bottom: 10px;
                page-break-after: avoid;
            }
            
            /* Form Fields - Match Official PDF Style */
            .form-label {
                font-size: 9pt;
                font-weight: bold;
                color: black;
                margin-bottom: 3px;
                display: block;
            }
            
            .form-label::after {
                content: ":";
            }
            
            .form-input,
            .form-select,
            .form-textarea {
                border: 1px solid black !important;
                background: white !important;
                color: black !important;
                font-size: 10pt;
                padding: 4px 8px;
                font-family: Arial, Helvetica, sans-serif;
                width: 100% !important;
                box-sizing: border-box;
            }
            
            .form-input.calculated {
                background: #f5f5f5 !important;
                font-weight: bold;
                border: 2px solid black !important;
            }
            
            /* Input groups - show prefix */
            .input-prefix {
                background: #e0e0e0 !important;
                border: 1px solid black !important;
                color: black !important;
                padding: 4px 8px;
            }
            
            /* Form rows - table layout for official look */
            .form-row {
                display: table;
                width: 100%;
                border-collapse: collapse;
                margin-bottom: 15px;
            }
            
            .form-group {
                display: table-cell;
                padding: 5px;
                vertical-align: top;
                border: 1px solid #ccc;
            }
            
            /* Results Card - Official Calculation Box */
            .results-card {
                background: white !important;
                color: black !important;
                border: 3px solid black !important;
                padding: 15px;
                margin-top: 20px;
                page-break-inside: avoid;
            }
            
            .results-card h3 {
                color: black !important;
                font-size: 12pt;
                font-weight: bold;
                border-bottom: 2px solid black;
                padding-bottom: 5px;
                margin-bottom: 10px;
                background: #e0e0e0;
                padding: 8px;
            }
            
            .result-item {
                border-bottom: 1px solid #ccc;
                color: black !important;
                padding: 8px 0;
                display: flex;
                justify-content: space-between;
            }
            
            .result-label {
                font-weight: bold;
            }
            
            .result-value {
                font-weight: bold;
                font-size: 11pt;
            }
            
            /* Notice Preview - Official Notice Format */
            .notice-preview {
                border: 3px double black !important;
                background: white !important;
                padding: 20px;
                page-break-inside: avoid;
                font-family: 'Times New Roman', Times, serif;
            }
            
            .notice-preview h4 {
                color: black !important;
                font-size: 13pt;
                font-weight: bold;
                text-align: center;
                text-transform: uppercase;
                margin-bottom: 15px;
                border-bottom: 2px solid black;
                padding-bottom: 10px;
            }
            
            .notice-preview p {
                text-align: justify;
                line-height: 1.6;
                margin-bottom: 10px;
            }
            
            .notice-preview table {
                border: 2px solid black !important;
                width: 100%;
                margin: 15px 0;
            }
            
            .notice-preview td {
                border: 1px solid black !important;
                padding: 8px;
                font-size: 10pt;
            }
            
            /* Checkbox styling for print */
            .checkbox-group {
                border: 1px solid black;
                padding: 5px;
                margin: 5px 0;
                background: #f9f9f9;
            }
            
            .checkbox-group input[type="checkbox"] {
                width: 15px;
                height: 15px;
                border: 2px solid black;
            }
            
            /* Help text */
            .help-text {
                font-size: 8pt;
                color: #333;
                font-style: italic;
            }
            
            /* Page breaks */
            .section {
                page-break-inside: avoid;
            }
            
            h2, h3 {
                page-break-after: avoid;
            }
            
            /* Official footer */
            @page {
                size: letter;
                margin: 0.5in 0.75in;
                
                @bottom-left {
                    content: "Form " attr(data-form-number);
                    font-size: 8pt;
                    font-style: italic;
                }
                
                @bottom-center {
                    content: "Texas Comptroller of Public Accounts";
                    font-size: 8pt;
                }
                
                @bottom-right {
                    content: "Page " counter(page);
                    font-size: 8pt;
                }
            }
            
            /* Form-specific layouts */
            .print-form-50-856 .section:nth-child(1)::before {
                content: "FORM 50-856 - Tax Rate Calculation Worksheet";
                display: block;
                font-size: 14pt;
                font-weight: bold;
                text-align: center;
                padding: 15px;
                border: 3px solid black;
                margin-bottom: 20px;
                background: #f0f0f0;
            }
            
            /* Line numbers for official forms */
            .form-group::before {
                counter-increment: line-number;
                content: counter(line-number) ".";
                font-weight: bold;
                margin-right: 5px;
                display: inline-block;
                width: 25px;
            }
            
            .section {
                counter-reset: line-number;
            }
            
            /* Signature lines */
            .signature-area {
                margin-top: 40px;
                page-break-inside: avoid;
            }
            
            .signature-line {
                border-bottom: 2px solid black;
                width: 300px;
                margin: 30px 0 5px 0;
            }
            
            .signature-label {
                font-size: 9pt;
                font-weight: bold;
            }
            
            /* Date fields */
            input[type="date"],
            input[type="time"] {
                border: 2px solid black !important;
                padding: 5px;
                font-size: 10pt;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // API Base URL - change this to your server URL
        const API_BASE_URL = '/api';

        // API Helper Functions
        const apiCall = async (endpoint, method = 'GET', data = null) => {
            const options = {
                method,
                headers: {
                    'Content-Type': 'application/json',
                }
            };
            
            if (data) {
                options.body = JSON.stringify(data);
            }
            
            try {
                const response = await fetch(`${API_BASE_URL}${endpoint}`, options);
                const result = await response.json();
                return result;
            } catch (error) {
                console.error('API Error:', error);
                return { status: 'error', message: error.message };
            }
        };

        function TruthInTaxationPortal() {
            const [activeTab, setActiveTab] = useState('calculator');
            const [selectedForm, setSelectedForm] = useState('standard');
            const [dbStats, setDbStats] = useState(null);
            
            useEffect(() => {
                // Load database statistics on mount
                loadStats();
            }, []);
            
            const loadStats = async () => {
                const result = await apiCall('/stats');
                if (result.status === 'success') {
                    setDbStats(result.data);
                }
            };
            
            return (
                <div className="container">
                    <div className="header">
                        <h1>Truth-in-Taxation Forms Portal</h1>
                        <p>Texas Property Tax Code Compliance Tools</p>
                        <p style={{marginTop: '8px', fontSize: '12px'}}>Complete All Required Forms for Tax Rate Adoption</p>
                    </div>

                    <div className="nav-tabs">
                        <button 
                            className={`nav-tab ${activeTab === 'calculator' ? 'active' : ''}`}
                            onClick={() => setActiveTab('calculator')}
                        >
                            üìä Tax Rate Calculator
                        </button>
                        <button 
                            className={`nav-tab ${activeTab === 'notices' ? 'active' : ''}`}
                            onClick={() => setActiveTab('notices')}
                        >
                            üì¢ Public Notices
                        </button>
                        <button 
                            className={`nav-tab ${activeTab === 'ballots' ? 'active' : ''}`}
                            onClick={() => setActiveTab('ballots')}
                        >
                            ÔøΩüó≥Ô∏è Ballots & Petitions
                        </button>
                        <button 
                            className={`nav-tab ${activeTab === 'school' ? 'active' : ''}`}
                            onClick={() => setActiveTab('school')}
                        >
                            üéì School Districts
                        </button>
                        <button 
                            className={`nav-tab ${activeTab === 'water' ? 'active' : ''}`}
                            onClick={() => setActiveTab('water')}
                        >
                            üíß Water Districts
                        </button>
                    </div>

                    <div className="form-content">
                        {activeTab === 'calculator' && <TaxRateCalculator selectedForm={selectedForm} setSelectedForm={setSelectedForm} />}
                        {activeTab === 'notices' && <PublicNotices />}
                        {activeTab === 'ballots' && <BallotsAndPetitions />}
                        {activeTab === 'school' && <SchoolDistrictForms />}
                        {activeTab === 'water' && <WaterDistrictForms />}
                    </div>
                </div>
            );
        }

        function TaxRateCalculator({ selectedForm, setSelectedForm }) {
            // Basic Information
            const [taxingUnit, setTaxingUnit] = useState('');
            const [county, setCounty] = useState('');
            const [taxYear, setTaxYear] = useState('2025');
            
            // Last Year's Values
            const [lastYearLevy, setLastYearLevy] = useState('');
            const [lastYearMORate, setLastYearMORate] = useState('');
            const [lastYearDebtRate, setLastYearDebtRate] = useState('');
            
            // Current Year Values
            const [currentTotalValue, setCurrentTotalValue] = useState('');
            const [newPropertyValue, setNewPropertyValue] = useState('');
            const [lostPropertyLevy, setLostPropertyLevy] = useState('');
            
            // Proposed Rate
            const [proposedMORate, setProposedMORate] = useState('');
            const [proposedDebtRate, setProposedDebtRate] = useState('');
            
            // Additional fields
            const [totalDebt, setTotalDebt] = useState('');
            const [taxIncrements, setTaxIncrements] = useState('');
            const [disasterArea, setDisasterArea] = useState(false);

            const formTypes = [
                {
                    id: 'standard',
                    name: '50-856: Standard Taxing Unit',
                    description: 'For cities, counties, and other taxing units (not school or water districts)',
                    badge: 'Most Common'
                },
                {
                    id: 'disaster',
                    name: '50-856-A: Disaster Area Supplement',
                    description: 'Additional worksheet for taxing units in declared disaster areas',
                    badge: 'Supplemental'
                }
            ];

            const calculateNoNewRevenue = () => {
                const lastLevy = parseFloat(lastYearLevy) || 0;
                const lostLevy = parseFloat(lostPropertyLevy) || 0;
                const currentValue = parseFloat(currentTotalValue) || 0;
                const newValue = parseFloat(newPropertyValue) || 0;
                
                if (currentValue - newValue <= 0) return 0;
                
                return ((lastLevy - lostLevy) / (currentValue - newValue)) * 100;
            };

            const calculateVoterApproval = () => {
                const noNewRevenue = calculateNoNewRevenue();
                const debtRate = parseFloat(proposedDebtRate) || parseFloat(lastYearDebtRate) || 0;
                
                if (disasterArea) {
                    return (noNewRevenue * 1.05) + debtRate;
                }
                
                return (noNewRevenue * 1.035) + debtRate;
            };

            const calculateProposedRate = () => {
                const moRate = parseFloat(proposedMORate) || 0;
                const debtRate = parseFloat(proposedDebtRate) || 0;
                return moRate + debtRate;
            };

            const calculateDeMinimisRate = () => {
                const noNewRevenue = calculateNoNewRevenue();
                const debtRate = parseFloat(proposedDebtRate) || parseFloat(lastYearDebtRate) || 0;
                return (noNewRevenue * 1.08) + debtRate;
            };

            const handleSaveToDatabase = async () => {
                if (!taxingUnit || !county) {
                    alert('Please fill in required fields (Taxing Unit and County)');
                    return;
                }
                
                const formData = {
                    formType: selectedForm,
                    taxingUnit,
                    county,
                    taxYear,
                    lastYearLevy: parseFloat(lastYearLevy) || null,
                    lastYearMORate: parseFloat(lastYearMORate) || null,
                    lastYearDebtRate: parseFloat(lastYearDebtRate) || null,
                    currentTotalValue: parseFloat(currentTotalValue) || null,
                    newPropertyValue: parseFloat(newPropertyValue) || null,
                    lostPropertyLevy: parseFloat(lostPropertyLevy) || null,
                    proposedMORate: parseFloat(proposedMORate) || null,
                    proposedDebtRate: parseFloat(proposedDebtRate) || null,
                    totalDebt: parseFloat(totalDebt) || null,
                    taxIncrements: parseFloat(taxIncrements) || null,
                    isDisasterArea: disasterArea,
                    noNewRevenueRate: calculateNoNewRevenue(),
                    voterApprovalRate: calculateVoterApproval(),
                    deMinimisRate: calculateDeMinimisRate(),
                    proposedRate: calculateProposedRate()
                };
                
                const result = await apiCall('/tax-rate-calculation', 'POST', formData);
                
                if (result.status === 'success') {
                    alert(`\u2705 Tax rate calculation saved successfully!\nRecord ID: ${result.id}`);
                } else {
                    alert(`√¢¬ù≈í Error saving to database: ${result.message}`);
                }
            };

            const handleExportPDF = () => {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                doc.setFontSize(18);
                doc.text('Truth-in-Taxation Tax Rate Calculation', 20, 20);
                
                doc.setFontSize(10);
                doc.text(`Form: ${formTypes.find(f => f.id === selectedForm)?.name}`, 20, 30);
                
                doc.setFontSize(12);
                doc.text(`Taxing Unit: ${taxingUnit}`, 20, 45);
                doc.text(`County: ${county}`, 20, 52);
                doc.text(`Tax Year: ${taxYear}`, 20, 59);
                
                doc.text('Calculated Rates:', 20, 75);
                doc.text(`No-New-Revenue Tax Rate: $${calculateNoNewRevenue().toFixed(6)} per $100`, 20, 85);
                doc.text(`Voter-Approval Tax Rate: $${calculateVoterApproval().toFixed(6)} per $100`, 20, 92);
                doc.text(`De Minimis Rate: $${calculateDeMinimisRate().toFixed(6)} per $100`, 20, 99);
                doc.text(`Proposed Tax Rate: $${calculateProposedRate().toFixed(6)} per $100`, 20, 106);
                
                if (disasterArea) {
                    doc.text('* Disaster Area: 5% adjustment applied', 20, 116);
                }
                
                doc.save(`truth-in-taxation-${taxingUnit.replace(/\s+/g, '-')}.pdf`);
            };
            
            const handlePrintForm = () => {
                // Get the selected form information
                const selectedFormInfo = formTypes.find(f => f.id === selectedForm);
                const formNumber = selectedFormInfo?.form || '50-856';
                const formName = selectedFormInfo?.name || 'Tax Rate Calculation';
                
                // Add form-specific class to body for styling
                document.body.classList.add('printing');
                document.body.classList.add(`print-form-${formNumber}`);
                
                // Add form number as data attribute to form content
                const formContent = document.querySelector('.form-content');
                if (formContent) {
                    formContent.setAttribute('data-form-number', formNumber);
                }
                
                // Set page title for print header
                const originalTitle = document.title;
                const printDate = new Date().toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long', 
                    day: 'numeric'
                });
                
                document.title = `Form ${formNumber} - ${taxingUnit || 'Tax Rate Calculation'} - ${taxYear || new Date().getFullYear()}`;
                
                // Add signature section if not present
                const existingSignature = document.querySelector('.signature-area');
                if (!existingSignature && formContent) {
                    const signatureHTML = `
                        <div class="signature-area" style="margin-top: 40px; page-break-inside: avoid;">
                            <h3 style="font-size: 11pt; font-weight: bold; margin-bottom: 15px;">CERTIFICATION</h3>
                            <p style="font-size: 9pt; margin-bottom: 20px;">
                                I, the undersigned, certify that the information provided in this form is true and correct 
                                to the best of my knowledge and belief.
                            </p>
                            <div style="margin-top: 30px;">
                                <div class="signature-line"></div>
                                <div class="signature-label">Signature of Chief Appraiser or Designated Representative</div>
                            </div>
                            <div style="margin-top: 30px; display: inline-block; width: 45%;">
                                <div class="signature-line"></div>
                                <div class="signature-label">Date</div>
                            </div>
                            <div style="margin-top: 30px; display: inline-block; width: 45%; margin-left: 5%;">
                                <div class="signature-line"></div>
                                <div class="signature-label">Title</div>
                            </div>
                            <p style="font-size: 8pt; margin-top: 30px; font-style: italic; color: #666;">
                                Form ${formNumber} - Texas Comptroller of Public Accounts - Printed: ${printDate}
                            </p>
                        </div>
                    `;
                    
                    // Temporarily add signature section
                    const tempDiv = document.createElement('div');
                    tempDiv.innerHTML = signatureHTML;
                    tempDiv.className = 'temp-signature';
                    formContent.appendChild(tempDiv);
                }
                
                // Trigger browser print dialog
                setTimeout(() => {
                    window.print();
                    
                    // Cleanup after print
                    setTimeout(() => {
                        document.title = originalTitle;
                        document.body.classList.remove('printing');
                        document.body.classList.remove(`print-form-${formNumber}`);
                        
                        // Remove temporary signature section
                        const tempSig = document.querySelector('.temp-signature');
                        if (tempSig) {
                            tempSig.remove();
                        }
                        
                        // Remove data attribute
                        if (formContent) {
                            formContent.removeAttribute('data-form-number');
                        }
                    }, 100);
                }, 100);
            };

            const noNewRevenueRate = calculateNoNewRevenue();
            const voterApprovalRate = calculateVoterApproval();
            const proposedRate = calculateProposedRate();
            const deMinimisRate = calculateDeMinimisRate();

            return (
                <>
                    <div className="info-box">
                        <p>
                            <strong>Tax Rate Calculation Worksheets:</strong> Select the appropriate form for your taxing unit type. 
                            These worksheets help calculate the no-new-revenue tax rate and voter-approval tax rate 
                            as required by Texas Property Tax Code.
                        </p>
                    </div>

                    <div className="form-selector">
                        <h3 style={{fontSize: '18px', marginBottom: '16px', color: '#1e3a8a'}}>Select Form Type</h3>
                        <div className="form-grid">
                            {formTypes.map(form => (
                                <div 
                                    key={form.id}
                                    className={`form-card ${selectedForm === form.id ? 'selected' : ''}`}
                                    onClick={() => setSelectedForm(form.id)}
                                >
                                    <h3>{form.name}</h3>
                                    <p>{form.description}</p>
                                    {form.badge && <span className="form-badge">{form.badge}</span>}
                                </div>
                            ))}
                        </div>
                    </div>

                    <div className="section">
                        <h2 className="section-title">1. Basic Information</h2>
                        
                        <div className="form-row">
                            <div className="form-group">
                                <label className="form-label">Taxing Unit Name *</label>
                                <input 
                                    type="text" 
                                    className="form-input"
                                    value={taxingUnit}
                                    onChange={(e) => setTaxingUnit(e.target.value)}
                                    placeholder="e.g., City of Austin, Travis County"
                                />
                            </div>

                            <div className="form-group">
                                <label className="form-label">County *</label>
                                <input 
                                    type="text" 
                                    className="form-input"
                                    value={county}
                                    onChange={(e) => setCounty(e.target.value)}
                                    placeholder="e.g., Travis County"
                                />
                            </div>

                            <div className="form-group">
                                <label className="form-label">Tax Year *</label>
                                <input 
                                    type="text" 
                                    className="form-input"
                                    value={taxYear}
                                    onChange={(e) => setTaxYear(e.target.value)}
                                />
                            </div>
                        </div>

                        {selectedForm === 'disaster' && (
                            <div className="checkbox-group">
                                <input 
                                    type="checkbox" 
                                    id="disaster"
                                    checked={disasterArea}
                                    onChange={(e) => setDisasterArea(e.target.checked)}
                                />
                                <label htmlFor="disaster">
                                    This taxing unit is in a declared disaster area
                                </label>
                            </div>
                        )}
                    </div>

                    <div className="section">
                        <h2 className="section-title">2. Last Year's Levy Information</h2>
                        
                        <div className="form-row">
                            <div className="form-group">
                                <label className="form-label">Last Year's Total Levy *</label>
                                <div className="input-group">
                                    <span className="input-prefix">$</span>
                                    <input 
                                        type="number" 
                                        className="form-input"
                                        value={lastYearLevy}
                                        onChange={(e) => setLastYearLevy(e.target.value)}
                                        placeholder="0.00"
                                        step="0.01"
                                    />
                                </div>
                                <p className="help-text">Total property taxes levied last year</p>
                            </div>

                            <div className="form-group">
                                <label className="form-label">Last Year's M&O Rate</label>
                                <div className="input-group">
                                    <span className="input-prefix">$</span>
                                    <input 
                                        type="number" 
                                        className="form-input"
                                        value={lastYearMORate}
                                        onChange={(e) => setLastYearMORate(e.target.value)}
                                        placeholder="0.000000"
                                        step="0.000001"
                                    />
                                </div>
                                <p className="help-text">Per $100 of taxable value</p>
                            </div>

                            <div className="form-group">
                                <label className="form-label">Last Year's Debt Rate</label>
                                <div className="input-group">
                                    <span className="input-prefix">$</span>
                                    <input 
                                        type="number" 
                                        className="form-input"
                                        value={lastYearDebtRate}
                                        onChange={(e) => setLastYearDebtRate(e.target.value)}
                                        placeholder="0.000000"
                                        step="0.000001"
                                    />
                                </div>
                                <p className="help-text">Per $100 of taxable value</p>
                            </div>
                        </div>

                        <div className="form-group">
                            <label className="form-label">Lost Property Levy *</label>
                            <div className="input-group">
                                <span className="input-prefix">$</span>
                                <input 
                                    type="number" 
                                    className="form-input"
                                    value={lostPropertyLevy}
                                    onChange={(e) => setLostPropertyLevy(e.target.value)}
                                    placeholder="0.00"
                                    step="0.01"
                                />
                            </div>
                            <p className="help-text">Levy on property no longer in the tax base</p>
                        </div>
                    </div>

                    <div className="section">
                        <h2 className="section-title">3. Current Year's Property Values</h2>
                        
                        <div className="form-row">
                            <div className="form-group">
                                <label className="form-label">Current Total Taxable Value *</label>
                                <div className="input-group">
                                    <span className="input-prefix">$</span>
                                    <input 
                                        type="number" 
                                        className="form-input"
                                        value={currentTotalValue}
                                        onChange={(e) => setCurrentTotalValue(e.target.value)}
                                        placeholder="0.00"
                                        step="0.01"
                                    />
                                </div>
                                <p className="help-text">Total taxable value from certified appraisal roll</p>
                            </div>

                            <div className="form-group">
                                <label className="form-label">New Property Value *</label>
                                <div className="input-group">
                                    <span className="input-prefix">$</span>
                                    <input 
                                        type="number" 
                                        className="form-input"
                                        value={newPropertyValue}
                                        onChange={(e) => setNewPropertyValue(e.target.value)}
                                        placeholder="0.00"
                                        step="0.01"
                                    />
                                </div>
                                <p className="help-text">Value of new improvements and annexations</p>
                            </div>

                            <div className="form-group">
                                <label className="form-label">Tax Increments (TIF)</label>
                                <div className="input-group">
                                    <span className="input-prefix">$</span>
                                    <input 
                                        type="number" 
                                        className="form-input"
                                        value={taxIncrements}
                                        onChange={(e) => setTaxIncrements(e.target.value)}
                                        placeholder="0.00"
                                        step="0.01"
                                    />
                                </div>
                                <p className="help-text">Tax increment financing value</p>
                            </div>
                        </div>
                    </div>

                    <div className="section">
                        <h2 className="section-title">4. Proposed Tax Rate</h2>
                        
                        <div className="form-row">
                            <div className="form-group">
                                <label className="form-label">Proposed M&O Rate *</label>
                                <div className="input-group">
                                    <span className="input-prefix">$</span>
                                    <input 
                                        type="number" 
                                        className="form-input"
                                        value={proposedMORate}
                                        onChange={(e) => setProposedMORate(e.target.value)}
                                        placeholder="0.000000"
                                        step="0.000001"
                                    />
                                </div>
                                <p className="help-text">Per $100 of taxable value</p>
                            </div>

                            <div className="form-group">
                                <label className="form-label">Proposed Debt Rate</label>
                                <div className="input-group">
                                    <span className="input-prefix">$</span>
                                    <input 
                                        type="number" 
                                        className="form-input"
                                        value={proposedDebtRate}
                                        onChange={(e) => setProposedDebtRate(e.target.value)}
                                        placeholder="0.000000"
                                        step="0.000001"
                                    />
                                </div>
                                <p className="help-text">Per $100 of taxable value</p>
                            </div>

                            <div className="form-group">
                                <label className="form-label">Total Outstanding Debt</label>
                                <div className="input-group">
                                    <span className="input-prefix">$</span>
                                    <input 
                                        type="number" 
                                        className="form-input"
                                        value={totalDebt}
                                        onChange={(e) => setTotalDebt(e.target.value)}
                                        placeholder="0.00"
                                        step="0.01"
                                    />
                                </div>
                                <p className="help-text">Total bonded indebtedness</p>
                            </div>
                        </div>
                    </div>

                    <div className="section">
                        <h2 className="section-title">5. Calculated Tax Rates</h2>
                        
                        <div className="form-row">
                            <div className="form-group">
                                <label className="form-label">No-New-Revenue Tax Rate (Calculated)</label>
                                <div className="input-group">
                                    <span className="input-prefix">$</span>
                                    <input 
                                        type="text" 
                                        className="form-input calculated"
                                        value={noNewRevenueRate.toFixed(6)}
                                        readOnly
                                    />
                                </div>
                                <p className="help-text">Rate that would produce same revenue as last year</p>
                            </div>

                            <div className="form-group">
                                <label className="form-label">Voter-Approval Tax Rate (Calculated)</label>
                                <div className="input-group">
                                    <span className="input-prefix">$</span>
                                    <input 
                                        type="text" 
                                        className="form-input calculated"
                                        value={voterApprovalRate.toFixed(6)}
                                        readOnly
                                    />
                                </div>
                                <p className="help-text">
                                    {disasterArea 
                                        ? 'Maximum rate without election (105% for disaster areas)' 
                                        : 'Maximum rate without election (103.5%)'}
                                </p>
                            </div>

                            <div className="form-group">
                                <label className="form-label">De Minimis Rate (Calculated)</label>
                                <div className="input-group">
                                    <span className="input-prefix">$</span>
                                    <input 
                                        type="text" 
                                        className="form-input calculated"
                                        value={deMinimisRate.toFixed(6)}
                                        readOnly
                                    />
                                </div>
                                <p className="help-text">108% threshold for small taxing units</p>
                            </div>

                            <div className="form-group">
                                <label className="form-label">Proposed Tax Rate (Calculated)</label>
                                <div className="input-group">
                                    <span className="input-prefix">$</span>
                                    <input 
                                        type="text" 
                                        className="form-input calculated"
                                        value={proposedRate.toFixed(6)}
                                        readOnly
                                    />
                                </div>
                                <p className="help-text">Total of proposed M&O rate and debt rate</p>
                            </div>
                        </div>
                    </div>

                    {(noNewRevenueRate > 0 || voterApprovalRate > 0 || proposedRate > 0) && (
                        <div className="results-card">
                            <h3>üìä Summary of Tax Rates</h3>
                            <div className="result-item">
                                <span className="result-label">No-New-Revenue Tax Rate:</span>
                                <span className="result-value">${noNewRevenueRate.toFixed(6)}</span>
                            </div>
                            <div className="result-item">
                                <span className="result-label">Voter-Approval Tax Rate:</span>
                                <span className="result-value">${voterApprovalRate.toFixed(6)}</span>
                            </div>
                            <div className="result-item">
                                <span className="result-label">De Minimis Rate:</span>
                                <span className="result-value">${deMinimisRate.toFixed(6)}</span>
                            </div>
                            <div className="result-item">
                                <span className="result-label">Proposed Tax Rate:</span>
                                <span className="result-value">${proposedRate.toFixed(6)}</span>
                            </div>
                            {proposedRate > voterApprovalRate && (
                                <div style={{marginTop: '16px', padding: '12px', background: 'rgba(255,255,255,0.2)', borderRadius: '8px'}}>
                                    <p style={{fontSize: '14px'}}>
                                        &#9888; <strong>Notice:</strong> The proposed rate exceeds the voter-approval rate. 
                                        An election may be required.
                                    </p>
                                </div>
                            )}
                        </div>
                    )}

                    <div className="button-group">
                        <button className="btn btn-secondary" onClick={() => window.location.reload()}>
                            üîÑ Reset Form
                        </button>
                        <button className="btn btn-print" onClick={handlePrintForm}>
                            üñ®Ô∏è Print Form
                        </button>
                        <button className="btn btn-success" onClick={handleExportPDF}>
                            üìÑ Export to PDF
                        </button>
                        <button className="btn btn-primary" onClick={handleSaveToDatabase}>
                            üíæ Save to Database
                        </button>
                    </div>
                </>
            );
        }

        function PublicNotices() {
            const [noticeType, setNoticeType] = useState('exceeds-both');
            const [taxingUnit, setTaxingUnit] = useState('');
            const [proposedRate, setProposedRate] = useState('');
            const [noNewRevenue, setNoNewRevenue] = useState('');
            const [voterApproval, setVoterApproval] = useState('');
            const [meetingDate, setMeetingDate] = useState('');
            const [meetingTime, setMeetingTime] = useState('');
            const [meetingLocation, setMeetingLocation] = useState('');

            const noticeTypes = [
                {
                    id: 'exceeds-both',
                    form: '50-873',
                    name: 'Exceeds No-New-Revenue AND Voter-Approval',
                    description: 'When proposed rate exceeds both thresholds'
                },
                {
                    id: 'exceeds-nnr',
                    form: '50-876',
                    name: 'Exceeds No-New-Revenue Only',
                    description: 'When proposed rate exceeds no-new-revenue but not voter-approval'
                },
                {
                    id: 'exceeds-va',
                    form: '50-877',
                    name: 'Exceeds Voter-Approval Only',
                    description: 'When proposed rate exceeds voter-approval but not no-new-revenue'
                },
                {
                    id: 'exceeds-none',
                    form: '50-883',
                    name: 'Does Not Exceed Either Rate',
                    description: 'When proposed rate does not exceed no-new-revenue or voter-approval'
                },
                {
                    id: 'de-minimis',
                    form: '50-874',
                    name: 'De Minimis Rate Notice',
                    description: 'For small taxing units with de minimis rate'
                },
                {
                    id: 'small-city',
                    form: '50-757',
                    name: 'Small Taxing Unit Notice',
                    description: 'For taxing units with total proposed levy of $500,000 or less'
                }
            ];

            const handleSaveNotice = async () => {
                if (!taxingUnit || !proposedRate || !noNewRevenue || !voterApproval) {
                    alert('Please fill in all required fields');
                    return;
                }
                
                const selectedNotice = noticeTypes.find(n => n.id === noticeType);
                
                const noticeData = {
                    noticeType,
                    formNumber: selectedNotice?.form,
                    taxingUnit,
                    proposedRate: parseFloat(proposedRate) || null,
                    noNewRevenueRate: parseFloat(noNewRevenue) || null,
                    voterApprovalRate: parseFloat(voterApproval) || null,
                    meetingDate,
                    meetingTime,
                    meetingLocation,
                    noticeText: `Notice for ${taxingUnit} - ${selectedNotice?.name}`
                };
                
                const result = await apiCall('/public-notice', 'POST', noticeData);
                
                if (result.status === 'success') {
                    alert(`\u2705 Public notice saved successfully!\nRecord ID: ${result.id}`);
                } else {
                    alert(`√¢¬ù≈í Error saving to database: ${result.message}`);
                }
            };

            const handleExportNotice = () => {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                doc.setFontSize(16);
                doc.text('NOTICE OF PUBLIC HEARING ON TAX INCREASE', 20, 20);
                
                doc.setFontSize(11);
                const notice = `
The ${taxingUnit} will hold a public hearing on a proposed tax rate for the tax year ${new Date().getFullYear()}
on ${meetingDate} at ${meetingTime} at ${meetingLocation}.

Your individual taxes may increase or decrease, depending on the change in the taxable value of your property
in relation to the change in taxable value of all other property and the tax rate that is adopted.

Proposed Tax Rate: $${proposedRate} per $100
No-New-Revenue Tax Rate: $${noNewRevenue} per $100
Voter-Approval Tax Rate: $${voterApproval} per $100

The no-new-revenue tax rate is the tax rate for the ${new Date().getFullYear()} tax year that will raise the same
amount of property tax revenue for ${taxingUnit} from the same properties in both the ${new Date().getFullYear()-1}
tax year and the ${new Date().getFullYear()} tax year.

The voter-approval rate is the highest tax rate that ${taxingUnit} may adopt without holding an election
to seek voter approval of the rate.
                `.trim();
                
                const lines = doc.splitTextToSize(notice, 170);
                doc.text(lines, 20, 35);
                
                doc.save(`notice-${taxingUnit.replace(/\s+/g, '-')}.pdf`);
            };
            
            const handlePrintNotice = () => {
                const selectedNotice = noticeTypes.find(n => n.id === noticeType);
                const formNumber = selectedNotice?.form || '50-873';
                
                document.body.classList.add('printing');
                const formContent = document.querySelector('.form-content');
                if (formContent) {
                    formContent.setAttribute('data-form-number', formNumber);
                }
                
                const originalTitle = document.title;
                document.title = `Form ${formNumber} - ${taxingUnit || 'Public Notice'} - Notice of Public Hearing`;
                
                setTimeout(() => {
                    window.print();
                    setTimeout(() => {
                        document.title = originalTitle;
                        document.body.classList.remove('printing');
                        if (formContent) {
                            formContent.removeAttribute('data-form-number');
                        }
                    }, 100);
                }, 100);
            };

            return (
                <>
                    <div className="info-box">
                        <p>
                            <strong>Public Notice Requirements:</strong> Texas law requires taxing units to publish specific 
                            notices based on how the proposed tax rate compares to the no-new-revenue and voter-approval 
                            tax rates. Select the appropriate notice type below.
                        </p>
                    </div>

                    <div className="form-selector">
                        <h3 style={{fontSize: '18px', marginBottom: '16px', color: '#1e3a8a'}}>Select Notice Type</h3>
                        <div className="form-grid">
                            {noticeTypes.map(notice => (
                                <div 
                                    key={notice.id}
                                    className={`form-card ${noticeType === notice.id ? 'selected' : ''}`}
                                    onClick={() => setNoticeType(notice.id)}
                                >
                                    <h3>{notice.name}</h3>
                                    <p>{notice.description}</p>
                                    <span className="form-badge">Form {notice.form}</span>
                                </div>
                            ))}
                        </div>
                    </div>

                    <div className="section">
                        <h2 className="section-title">Notice Information</h2>
                        
                        <div className="form-row">
                            <div className="form-group">
                                <label className="form-label">Taxing Unit Name *</label>
                                <input 
                                    type="text" 
                                    className="form-input"
                                    value={taxingUnit}
                                    onChange={(e) => setTaxingUnit(e.target.value)}
                                    placeholder="e.g., City of Austin"
                                />
                            </div>

                            <div className="form-group">
                                <label className="form-label">Proposed Tax Rate *</label>
                                <div className="input-group">
                                    <span className="input-prefix">$</span>
                                    <input 
                                        type="number" 
                                        className="form-input"
                                        value={proposedRate}
                                        onChange={(e) => setProposedRate(e.target.value)}
                                        placeholder="0.000000"
                                        step="0.000001"
                                    />
                                </div>
                                <p className="help-text">Per $100 of taxable value</p>
                            </div>
                        </div>

                        <div className="form-row">
                            <div className="form-group">
                                <label className="form-label">No-New-Revenue Rate *</label>
                                <div className="input-group">
                                    <span className="input-prefix">$</span>
                                    <input 
                                        type="number" 
                                        className="form-input"
                                        value={noNewRevenue}
                                        onChange={(e) => setNoNewRevenue(e.target.value)}
                                        placeholder="0.000000"
                                        step="0.000001"
                                    />
                                </div>
                            </div>

                            <div className="form-group">
                                <label className="form-label">Voter-Approval Rate *</label>
                                <div className="input-group">
                                    <span className="input-prefix">$</span>
                                    <input 
                                        type="number" 
                                        className="form-input"
                                        value={voterApproval}
                                        onChange={(e) => setVoterApproval(e.target.value)}
                                        placeholder="0.000000"
                                        step="0.000001"
                                    />
                                </div>
                            </div>
                        </div>

                        <div className="form-row">
                            <div className="form-group">
                                <label className="form-label">Public Hearing Date *</label>
                                <input 
                                    type="date" 
                                    className="form-input"
                                    value={meetingDate}
                                    onChange={(e) => setMeetingDate(e.target.value)}
                                />
                            </div>

                            <div className="form-group">
                                <label className="form-label">Public Hearing Time *</label>
                                <input 
                                    type="time" 
                                    className="form-input"
                                    value={meetingTime}
                                    onChange={(e) => setMeetingTime(e.target.value)}
                                />
                            </div>
                        </div>

                        <div className="form-group">
                            <label className="form-label">Public Hearing Location *</label>
                            <textarea 
                                className="form-textarea"
                                value={meetingLocation}
                                onChange={(e) => setMeetingLocation(e.target.value)}
                                placeholder="Enter the full address and room/location details"
                            />
                        </div>
                    </div>

                    {taxingUnit && proposedRate && noNewRevenue && voterApproval && (
                        <div className="notice-preview">
                            <h4>NOTICE OF PUBLIC HEARING ON TAX INCREASE</h4>
                            <p>
                                The <strong>{taxingUnit}</strong> will hold a public hearing on a proposed tax rate 
                                for the tax year {new Date().getFullYear()} on <strong>{meetingDate}</strong> at{' '}
                                <strong>{meetingTime}</strong> at <strong>{meetingLocation}</strong>.
                            </p>
                            <p>
                                Your individual taxes may increase or decrease, depending on the change in the taxable 
                                value of your property in relation to the change in taxable value of all other property 
                                and the tax rate that is adopted.
                            </p>
                            <table>
                                <tbody>
                                    <tr>
                                        <td><strong>Proposed Tax Rate:</strong></td>
                                        <td>${proposedRate} per $100</td>
                                    </tr>
                                    <tr>
                                        <td><strong>No-New-Revenue Tax Rate:</strong></td>
                                        <td>${noNewRevenue} per $100</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Voter-Approval Tax Rate:</strong></td>
                                        <td>${voterApproval} per $100</td>
                                    </tr>
                                </tbody>
                            </table>
                            <p style={{fontSize: '12px', marginTop: '20px'}}>
                                The no-new-revenue tax rate is the tax rate for the {new Date().getFullYear()} tax year 
                                that will raise the same amount of property tax revenue for {taxingUnit} from the same 
                                properties in both the {new Date().getFullYear()-1} tax year and the {new Date().getFullYear()} tax year.
                            </p>
                            <p style={{fontSize: '12px'}}>
                                The voter-approval rate is the highest tax rate that {taxingUnit} may adopt without 
                                holding an election to seek voter approval of the rate.
                            </p>
                        </div>
                    )}

                    <div className="button-group">
                        <button className="btn btn-secondary" onClick={() => window.location.reload()}>
                            üîÑ Reset Form
                        </button>
                        <button className="btn btn-print" onClick={handlePrintNotice}>
                            üñ®Ô∏è Print Notice
                        </button>
                        <button className="btn btn-success" onClick={handleExportNotice}>
                            üìÑ Export Notice to PDF
                        </button>
                        <button className="btn btn-primary" onClick={handleSaveNotice}>
                            üíæ Save to Database
                        </button>
                    </div>
                </>
            );
        }

        function BallotsAndPetitions() {
            const [ballotType, setBallotType] = useState('approval');
            const [taxingUnit, setTaxingUnit] = useState('');
            const [proposedRate, setProposedRate] = useState('');
            const [electionDate, setElectionDate] = useState('');
            const [language, setLanguage] = useState('english');

            const ballotTypes = [
                {
                    id: 'approval',
                    form: '50-861',
                    name: 'Ballot to Approve Tax Rate',
                    description: 'For taxing units other than school districts (Form 50-861)',
                    languages: ['english', 'spanish']
                },
                {
                    id: 'petition',
                    form: '50-862',
                    name: 'Petition for Election to Reduce Tax Rate',
                    description: 'Petition form for voters to request rate reduction election (Form 50-862)',
                    languages: ['english', 'spanish']
                },
                {
                    id: 'school',
                    form: '50-863',
                    name: 'School District Voter-Approval Ballot',
                    description: 'For school district elections (Form 50-863)',
                    languages: ['english', 'spanish']
                }
            ];

            const handleSaveBallot = async () => {
                if (!taxingUnit || !proposedRate || !electionDate) {
                    alert('Please fill in all required fields');
                    return;
                }
                
                const selectedBallot = ballotTypes.find(b => b.id === ballotType);
                
                const ballotData = {
                    ballotType,
                    formNumber: selectedBallot?.form,
                    taxingUnit,
                    proposedRate: parseFloat(proposedRate) || null,
                    electionDate,
                    language,
                    ballotText: `Ballot for ${taxingUnit} - ${selectedBallot?.name}`
                };
                
                const result = await apiCall('/ballot-petition', 'POST', ballotData);
                
                if (result.status === 'success') {
                    alert(`\u2705 Ballot/Petition saved successfully!\nRecord ID: ${result.id}`);
                } else {
                    alert(`√¢¬ù≈í Error saving to database: ${result.message}`);
                }
            };

            const handleExportBallot = () => {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                doc.setFontSize(14);
                doc.text('OFFICIAL BALLOT', 105, 20, { align: 'center' });
                doc.text(`${taxingUnit.toUpperCase()}`, 105, 30, { align: 'center' });
                doc.text('TAX RATE ELECTION', 105, 40, { align: 'center' });
                
                doc.setFontSize(11);
                doc.text(`Election Date: ${electionDate}`, 20, 55);
                
                doc.text('PROPOSITION', 20, 70);
                doc.setFontSize(10);
                
                const ballotText = ballotType === 'approval' 
                    ? `Shall the tax rate be increased from the no-new-revenue tax rate to the proposed tax rate of $${proposedRate} per $100 of taxable value for the purpose of providing additional revenue for municipal operations?`
                    : `Shall the tax rate be reduced?`;
                
                const lines = doc.splitTextToSize(ballotText, 170);
                doc.text(lines, 20, 80);
                
                doc.setFontSize(12);
                doc.text('√¢Àú¬ê FOR', 30, 120);
                doc.text('√¢Àú¬ê AGAINST', 30, 135);
                
                doc.save(`ballot-${taxingUnit.replace(/\s+/g, '-')}.pdf`);
            };
            
            const handlePrintBallot = () => {
                const selectedBallot = ballotTypes.find(b => b.id === ballotType);
                const formNumber = selectedBallot?.form || '50-861';
                
                document.body.classList.add('printing');
                const formContent = document.querySelector('.form-content');
                if (formContent) {
                    formContent.setAttribute('data-form-number', formNumber);
                }
                
                const originalTitle = document.title;
                document.title = `Form ${formNumber} - ${taxingUnit || 'Election Ballot'} - Official Ballot`;
                
                setTimeout(() => {
                    window.print();
                    setTimeout(() => {
                        document.title = originalTitle;
                        document.body.classList.remove('printing');
                        if (formContent) {
                            formContent.removeAttribute('data-form-number');
                        }
                    }, 100);
                }, 100);
            };

            return (
                <>
                    <div className="info-box">
                        <p>
                            <strong>Election Ballots & Petitions:</strong> When a tax rate exceeds the voter-approval rate, 
                            or when voters petition for an election, these forms are used for the official ballot language 
                            and petition documents. Forms are available in English and Spanish.
                        </p>
                    </div>

                    <div className="form-selector">
                        <h3 style={{fontSize: '18px', marginBottom: '16px', color: '#1e3a8a'}}>Select Ballot/Petition Type</h3>
                        <div className="form-grid">
                            {ballotTypes.map(ballot => (
                                <div 
                                    key={ballot.id}
                                    className={`form-card ${ballotType === ballot.id ? 'selected' : ''}`}
                                    onClick={() => setBallotType(ballot.id)}
                                >
                                    <h3>{ballot.name}</h3>
                                    <p>{ballot.description}</p>
                                    <span className="form-badge">Form {ballot.form}</span>
                                </div>
                            ))}
                        </div>
                    </div>

                    <div className="section">
                        <h2 className="section-title">Ballot/Petition Information</h2>
                        
                        <div className="form-row">
                            <div className="form-group">
                                <label className="form-label">Taxing Unit Name *</label>
                                <input 
                                    type="text" 
                                    className="form-input"
                                    value={taxingUnit}
                                    onChange={(e) => setTaxingUnit(e.target.value)}
                                    placeholder="e.g., City of Austin"
                                />
                            </div>

                            <div className="form-group">
                                <label className="form-label">Proposed Tax Rate *</label>
                                <div className="input-group">
                                    <span className="input-prefix">$</span>
                                    <input 
                                        type="number" 
                                        className="form-input"
                                        value={proposedRate}
                                        onChange={(e) => setProposedRate(e.target.value)}
                                        placeholder="0.000000"
                                        step="0.000001"
                                    />
                                </div>
                            </div>
                        </div>

                        <div className="form-row">
                            <div className="form-group">
                                <label className="form-label">Election Date *</label>
                                <input 
                                    type="date" 
                                    className="form-input"
                                    value={electionDate}
                                    onChange={(e) => setElectionDate(e.target.value)}
                                />
                            </div>

                            <div className="form-group">
                                <label className="form-label">Language *</label>
                                <select 
                                    className="form-select"
                                    value={language}
                                    onChange={(e) => setLanguage(e.target.value)}
                                >
                                    <option value="english">English</option>
                                    <option value="spanish">Spanish (Espa√É¬±ol)</option>
                                    <option value="both">Both Languages</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    {taxingUnit && proposedRate && electionDate && (
                        <div className="notice-preview">
                            <h4>OFFICIAL BALLOT PREVIEW</h4>
                            <h4 style={{fontSize: '16px', marginTop: '10px'}}>{taxingUnit.toUpperCase()}</h4>
                            <h4 style={{fontSize: '14px', marginTop: '5px'}}>TAX RATE ELECTION</h4>
                            
                            <p style={{marginTop: '20px', fontSize: '12px'}}>
                                <strong>Election Date:</strong> {electionDate}
                            </p>
                            
                            <p style={{marginTop: '20px'}}><strong>PROPOSITION</strong></p>
                            <p style={{fontSize: '13px', lineHeight: '1.8'}}>
                                {ballotType === 'approval' && (
                                    `Shall the tax rate be increased from the no-new-revenue tax rate to the proposed 
                                    tax rate of $${proposedRate} per $100 of taxable value for the purpose of providing 
                                    additional revenue for municipal operations?`
                                )}
                                {ballotType === 'petition' && (
                                    `Shall the ${taxingUnit} reduce the tax rate to the voter-approval tax rate?`
                                )}
                                {ballotType === 'school' && (
                                    `Shall the tax rate be increased from the voter-approval tax rate of the 
                                    ${taxingUnit} to the proposed tax rate of $${proposedRate} per $100 of taxable value?`
                                )}
                            </p>
                            
                            <div style={{marginTop: '30px', marginLeft: '40px'}}>
                                <p style={{marginBottom: '15px', fontSize: '14px'}}>√¢Àú¬ê <strong>FOR</strong></p>
                                <p style={{fontSize: '14px'}}>√¢Àú¬ê <strong>AGAINST</strong></p>
                            </div>
                        </div>
                    )}

                    <div className="button-group">
                        <button className="btn btn-secondary" onClick={() => window.location.reload()}>
                            üîÑ Reset Form
                        </button>
                        <button className="btn btn-print" onClick={handlePrintBallot}>
                            üñ®Ô∏è Print Ballot
                        </button>
                        <button className="btn btn-success" onClick={handleExportBallot}>
                            üìÑ Export Ballot to PDF
                        </button>
                        <button className="btn btn-primary" onClick={handleSaveBallot}>
                            üíæ Save to Database
                        </button>
                    </div>
                </>
            );
        }

        function SchoolDistrictForms() {
            const [formType, setFormType] = useState('no-chapter');
            const [schoolDistrict, setSchoolDistrict] = useState('');
            const [county, setCounty] = useState('');
            const [taxYear, setTaxYear] = useState('2025');
            const [currentValue, setCurrentValue] = useState('');
            const [moPortion, setMoPortion] = useState('');
            const [debtPortion, setDebtPortion] = useState('');
            const [hasChapter313, setHasChapter313] = useState(false);

            const schoolForms = [
                {
                    id: 'no-chapter',
                    form: '50-859',
                    name: 'Standard School District',
                    description: 'For school districts without Chapter 313 or JETI agreements (Form 50-859)'
                },
                {
                    id: 'with-chapter',
                    form: '50-884',
                    name: 'School District with Chapter 313/JETI',
                    description: 'For school districts with Chapter 313 and JETI agreements (Form 50-884)'
                },
                {
                    id: 'meeting-budget',
                    form: '50-280',
                    name: 'Notice of Public Meeting - Budget & Tax Rate',
                    description: 'Notice for public meeting to discuss budget and proposed tax rate (Form 50-280)'
                },
                {
                    id: 'meeting-tax',
                    form: '50-777',
                    name: 'Notice of Public Meeting - Tax Rate Only',
                    description: 'Notice for public meeting to discuss proposed tax rate only (Form 50-777)'
                }
            ];

            const handleSaveSchoolForm = async () => {
                if (!schoolDistrict || !county) {
                    alert('Please fill in required fields');
                    return;
                }
                
                const selectedSchoolForm = schoolForms.find(f => f.id === formType);
                
                const schoolData = {
                    formType,
                    formNumber: selectedSchoolForm?.form,
                    schoolDistrict,
                    county,
                    taxYear,
                    currentValue: parseFloat(currentValue) || null,
                    moPortion: parseFloat(moPortion) || null,
                    debtPortion: parseFloat(debtPortion) || null,
                    totalRate: (parseFloat(moPortion) || 0) + (parseFloat(debtPortion) || 0),
                    hasChapter313: hasChapter313
                };
                
                const result = await apiCall('/school-district', 'POST', schoolData);
                
                if (result.status === 'success') {
                    alert(`\u2705 School district form saved successfully!\nRecord ID: ${result.id}`);
                } else {
                    alert(`√¢¬ù≈í Error saving to database: ${result.message}`);
                }
            };

            const handleExportSchoolForm = () => {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                doc.setFontSize(16);
                doc.text('School District Tax Rate Calculation', 20, 20);
                
                doc.setFontSize(11);
                doc.text(`School District: ${schoolDistrict}`, 20, 35);
                doc.text(`County: ${county}`, 20, 42);
                doc.text(`Tax Year: ${taxYear}`, 20, 49);
                doc.text(`Form: ${schoolForms.find(f => f.id === formType)?.form}`, 20, 56);
                
                if (hasChapter313) {
                    doc.text('* Includes Chapter 313 or JETI agreements', 20, 66);
                }
                
                doc.text('M&O Portion: $' + (moPortion || '0.000000'), 20, 80);
                doc.text('Debt Portion: $' + (debtPortion || '0.000000'), 20, 87);
                doc.text('Total Rate: $' + ((parseFloat(moPortion) || 0) + (parseFloat(debtPortion) || 0)).toFixed(6), 20, 94);
                
                doc.save(`school-district-${schoolDistrict.replace(/\s+/g, '-')}.pdf`);
            };
            
            const handlePrintSchoolForm = () => {
                const selectedSchoolForm = schoolForms.find(f => f.id === formType);
                const formNumber = selectedSchoolForm?.form || '50-859';
                
                document.body.classList.add('printing');
                const formContent = document.querySelector('.form-content');
                if (formContent) {
                    formContent.setAttribute('data-form-number', formNumber);
                }
                
                const originalTitle = document.title;
                document.title = `Form ${formNumber} - ${schoolDistrict || 'School District'} - ${taxYear || new Date().getFullYear()}`;
                
                setTimeout(() => {
                    window.print();
                    setTimeout(() => {
                        document.title = originalTitle;
                        document.body.classList.remove('printing');
                        if (formContent) {
                            formContent.removeAttribute('data-form-number');
                        }
                    }, 100);
                }, 100);
            };

            return (
                <>
                    <div className="info-box">
                        <p>
                            <strong>School District Tax Rate Forms:</strong> School districts have special requirements 
                            for tax rate calculations and public notices. Select the appropriate form based on whether 
                            your district has Chapter 313 or JETI agreements.
                        </p>
                    </div>

                    <div className="form-selector">
                        <h3 style={{fontSize: '18px', marginBottom: '16px', color: '#1e3a8a'}}>Select School District Form</h3>
                        <div className="form-grid">
                            {schoolForms.map(form => (
                                <div 
                                    key={form.id}
                                    className={`form-card ${formType === form.id ? 'selected' : ''}`}
                                    onClick={() => setFormType(form.id)}
                                >
                                    <h3>{form.name}</h3>
                                    <p>{form.description}</p>
                                    <span className="form-badge">Form {form.form}</span>
                                </div>
                            ))}
                        </div>
                    </div>

                    <div className="section">
                        <h2 className="section-title">School District Information</h2>
                        
                        <div className="form-row">
                            <div className="form-group">
                                <label className="form-label">School District Name *</label>
                                <input 
                                    type="text" 
                                    className="form-input"
                                    value={schoolDistrict}
                                    onChange={(e) => setSchoolDistrict(e.target.value)}
                                    placeholder="e.g., Austin Independent School District"
                                />
                            </div>

                            <div className="form-group">
                                <label className="form-label">County *</label>
                                <input 
                                    type="text" 
                                    className="form-input"
                                    value={county}
                                    onChange={(e) => setCounty(e.target.value)}
                                    placeholder="e.g., Travis County"
                                />
                            </div>

                            <div className="form-group">
                                <label className="form-label">Tax Year *</label>
                                <input 
                                    type="text" 
                                    className="form-input"
                                    value={taxYear}
                                    onChange={(e) => setTaxYear(e.target.value)}
                                />
                            </div>
                        </div>

                        <div className="checkbox-group">
                            <input 
                                type="checkbox" 
                                id="chapter313"
                                checked={hasChapter313}
                                onChange={(e) => setHasChapter313(e.target.checked)}
                            />
                            <label htmlFor="chapter313">
                                District has Chapter 313 or JETI agreements
                            </label>
                        </div>
                    </div>

                    <div className="section">
                        <h2 className="section-title">Tax Rate Components</h2>
                        
                        <div className="form-row">
                            <div className="form-group">
                                <label className="form-label">Total Taxable Value *</label>
                                <div className="input-group">
                                    <span className="input-prefix">$</span>
                                    <input 
                                        type="number" 
                                        className="form-input"
                                        value={currentValue}
                                        onChange={(e) => setCurrentValue(e.target.value)}
                                        placeholder="0.00"
                                        step="0.01"
                                    />
                                </div>
                            </div>

                            <div className="form-group">
                                <label className="form-label">M&O Portion of Rate *</label>
                                <div className="input-group">
                                    <span className="input-prefix">$</span>
                                    <input 
                                        type="number" 
                                        className="form-input"
                                        value={moPortion}
                                        onChange={(e) => setMoPortion(e.target.value)}
                                        placeholder="0.000000"
                                        step="0.000001"
                                    />
                                </div>
                                <p className="help-text">Maintenance & Operations rate per $100</p>
                            </div>

                            <div className="form-group">
                                <label className="form-label">Debt Portion of Rate *</label>
                                <div className="input-group">
                                    <span className="input-prefix">$</span>
                                    <input 
                                        type="number" 
                                        className="form-input"
                                        value={debtPortion}
                                        onChange={(e) => setDebtPortion(e.target.value)}
                                        placeholder="0.000000"
                                        step="0.000001"
                                    />
                                </div>
                                <p className="help-text">Debt service rate per $100</p>
                            </div>
                        </div>

                        <div className="form-group">
                            <label className="form-label">Total Tax Rate (Calculated)</label>
                            <div className="input-group">
                                <span className="input-prefix">$</span>
                                <input 
                                    type="text" 
                                    className="form-input calculated"
                                    value={((parseFloat(moPortion) || 0) + (parseFloat(debtPortion) || 0)).toFixed(6)}
                                    readOnly
                                />
                            </div>
                        </div>
                    </div>

                    {hasChapter313 && (
                        <div className="warning-box">
                            <p>
                                <strong>&#9888; Chapter 313/JETI Notice:</strong> This district has Chapter 313 or JETI agreements. 
                                Use Form 50-884 for the tax rate calculation worksheet. Additional reporting requirements 
                                apply for value limitation agreements.
                            </p>
                        </div>
                    )}

                    <div className="button-group">
                        <button className="btn btn-secondary" onClick={() => window.location.reload()}>
                            üîÑ Reset Form
                        </button>
                        <button className="btn btn-print" onClick={handlePrintSchoolForm}>
                            üñ®Ô∏è Print Form
                        </button>
                        <button className="btn btn-success" onClick={handleExportSchoolForm}>
                            üìÑ Export to PDF
                        </button>
                        <button className="btn btn-primary" onClick={handleSaveSchoolForm}>
                            üíæ Save to Database
                        </button>
                    </div>
                </>
            );
        }

        function WaterDistrictForms() {
            const [districtType, setDistrictType] = useState('low-rate');
            const [districtName, setDistrictName] = useState('');
            const [county, setCounty] = useState('');
            const [taxYear, setTaxYear] = useState('2025');
            const [proposedRate, setProposedRate] = useState('');
            const [hearingDate, setHearingDate] = useState('');
            const [hearingTime, setHearingTime] = useState('');
            const [hearingLocation, setHearingLocation] = useState('');

            const waterForms = [
                {
                    id: 'low-rate',
                    form: '50-858',
                    name: 'Low Tax Rate Water District',
                    description: 'For water districts with low tax rates or developing districts (Form 50-858)'
                },
                {
                    id: 'developed',
                    form: '50-860',
                    name: 'Developed Water District',
                    description: 'For developed water districts (Form 50-860)'
                },
                {
                    id: 'notice',
                    form: '50-304',
                    name: 'Notice of Public Hearing',
                    description: 'Water district notice of public hearing on tax rate (Form 50-304)'
                }
            ];

            const handleSaveWaterForm = async () => {
                if (!districtName || !county) {
                    alert('Please fill in required fields');
                    return;
                }
                
                const selectedWaterForm = waterForms.find(f => f.id === districtType);
                
                const waterData = {
                    districtType,
                    formNumber: selectedWaterForm?.form,
                    districtName,
                    county,
                    taxYear,
                    proposedRate: parseFloat(proposedRate) || null,
                    hearingDate,
                    hearingTime,
                    hearingLocation
                };
                
                const result = await apiCall('/water-district', 'POST', waterData);
                
                if (result.status === 'success') {
                    alert(`\u2705 Water district form saved successfully!\nRecord ID: ${result.id}`);
                } else {
                    alert(`√¢¬ù≈í Error saving to database: ${result.message}`);
                }
            };

            const handleExportWaterForm = () => {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                doc.setFontSize(16);
                doc.text('Water District Tax Rate Calculation', 20, 20);
                
                doc.setFontSize(11);
                doc.text(`Water District: ${districtName}`, 20, 35);
                doc.text(`County: ${county}`, 20, 42);
                doc.text(`Tax Year: ${taxYear}`, 20, 49);
                doc.text(`Form: ${waterForms.find(f => f.id === districtType)?.form}`, 20, 56);
                
                doc.text(`Proposed Rate: $${proposedRate} per $100`, 20, 70);
                
                if (hearingDate && hearingTime) {
                    doc.text(`Public Hearing: ${hearingDate} at ${hearingTime}`, 20, 84);
                    doc.text(`Location: ${hearingLocation}`, 20, 91);
                }
                
                doc.save(`water-district-${districtName.replace(/\s+/g, '-')}.pdf`);
            };
            
            const handlePrintWaterForm = () => {
                const selectedWaterForm = waterForms.find(f => f.id === districtType);
                const formNumber = selectedWaterForm?.form || '50-858';
                
                document.body.classList.add('printing');
                const formContent = document.querySelector('.form-content');
                if (formContent) {
                    formContent.setAttribute('data-form-number', formNumber);
                }
                
                const originalTitle = document.title;
                document.title = `Form ${formNumber} - ${districtName || 'Water District'} - ${taxYear || new Date().getFullYear()}`;
                
                setTimeout(() => {
                    window.print();
                    setTimeout(() => {
                        document.title = originalTitle;
                        document.body.classList.remove('printing');
                        if (formContent) {
                            formContent.removeAttribute('data-form-number');
                        }
                    }, 100);
                }, 100);
            };

            return (
                <>
                    <div className="info-box">
                        <p>
                            <strong>Water District Tax Rate Forms:</strong> Water districts use special worksheets 
                            depending on whether they are low tax rate/developing districts or developed districts. 
                            Select the appropriate form for your water district.
                        </p>
                    </div>

                    <div className="form-selector">
                        <h3 style={{fontSize: '18px', marginBottom: '16px', color: '#1e3a8a'}}>Select Water District Form</h3>
                        <div className="form-grid">
                            {waterForms.map(form => (
                                <div 
                                    key={form.id}
                                    className={`form-card ${districtType === form.id ? 'selected' : ''}`}
                                    onClick={() => setDistrictType(form.id)}
                                >
                                    <h3>{form.name}</h3>
                                    <p>{form.description}</p>
                                    <span className="form-badge">Form {form.form}</span>
                                </div>
                            ))}
                        </div>
                    </div>

                    <div className="section">
                        <h2 className="section-title">Water District Information</h2>
                        
                        <div className="form-row">
                            <div className="form-group">
                                <label className="form-label">Water District Name *</label>
                                <input 
                                    type="text" 
                                    className="form-input"
                                    value={districtName}
                                    onChange={(e) => setDistrictName(e.target.value)}
                                    placeholder="e.g., Example Water Control & Improvement District"
                                />
                            </div>

                            <div className="form-group">
                                <label className="form-label">County *</label>
                                <input 
                                    type="text" 
                                    className="form-input"
                                    value={county}
                                    onChange={(e) => setCounty(e.target.value)}
                                    placeholder="e.g., Denton County"
                                />
                            </div>

                            <div className="form-group">
                                <label className="form-label">Tax Year *</label>
                                <input 
                                    type="text" 
                                    className="form-input"
                                    value={taxYear}
                                    onChange={(e) => setTaxYear(e.target.value)}
                                />
                            </div>
                        </div>

                        <div className="form-group">
                            <label className="form-label">Proposed Tax Rate *</label>
                            <div className="input-group">
                                <span className="input-prefix">$</span>
                                <input 
                                    type="number" 
                                    className="form-input"
                                    value={proposedRate}
                                    onChange={(e) => setProposedRate(e.target.value)}
                                    placeholder="0.000000"
                                    step="0.000001"
                                />
                            </div>
                            <p className="help-text">Per $100 of taxable value</p>
                        </div>
                    </div>

                    {districtType === 'notice' && (
                        <div className="section">
                            <h2 className="section-title">Public Hearing Information</h2>
                            
                            <div className="form-row">
                                <div className="form-group">
                                    <label className="form-label">Hearing Date *</label>
                                    <input 
                                        type="date" 
                                        className="form-input"
                                        value={hearingDate}
                                        onChange={(e) => setHearingDate(e.target.value)}
                                    />
                                </div>

                                <div className="form-group">
                                    <label className="form-label">Hearing Time *</label>
                                    <input 
                                        type="time" 
                                        className="form-input"
                                        value={hearingTime}
                                        onChange={(e) => setHearingTime(e.target.value)}
                                    />
                                </div>
                            </div>

                            <div className="form-group">
                                <label className="form-label">Hearing Location *</label>
                                <textarea 
                                    className="form-textarea"
                                    value={hearingLocation}
                                    onChange={(e) => setHearingLocation(e.target.value)}
                                    placeholder="Enter the full address and location details"
                                />
                            </div>
                        </div>
                    )}

                    <div className="info-box" style={{marginTop: '30px'}}>
                        <p>
                            <strong>Water District Classification:</strong> Low tax rate and developing districts 
                            follow different calculation methods than developed districts. Ensure you've selected 
                            the correct form type for your district's classification.
                        </p>
                    </div>

                    <div className="button-group">
                        <button className="btn btn-secondary" onClick={() => window.location.reload()}>
                            üîÑ Reset Form
                        </button>
                        <button className="btn btn-print" onClick={handlePrintWaterForm}>
                            üñ®Ô∏è Print Form
                        </button>
                        <button className="btn btn-success" onClick={handleExportWaterForm}>
                            üìÑ Export to PDF
                        </button>
                        <button className="btn btn-primary" onClick={handleSaveWaterForm}>
                            üíæ Save to Database
                        </button>
                    </div>
                </>
            );
        }

        ReactDOM.render(<TruthInTaxationPortal />, document.getElementById('root'));
    </script>
</body>
</html>